<ion-view>

    <ion-nav-bar class="bar-clear" ng-show="!isLoading">
        <ion-nav-back-button ng-click="myGoBack()" class="back-button-map" style="margin-top:8px;margin-left:8px;"></ion-nav-back-button>
    </ion-nav-bar>

    <md-content no-scroll-padding>
        <div flex class="shadow-bottom" ng-show="!isLoading">
            <ui-gmap-google-map center='map.center' zoom='map.zoom' options='map.options' styles="map.styles">
                <ui-gmap-marker ng-repeat="m in markers" coords="m.coords" icon="m.icon" idkey="m.id"></ui-gmap-marker>
            </ui-gmap-google-map>
        </div>

        <div ng-repeat="place in places" layout="row" ng-show="!isLoading" flex>
            <div flex="15" class="text-center card-vote">
                <h2 class="no-margin-bottom">{{place.nbVotes}}</h2>
            </div>

            <div class="item item-text-wrap card text-center card-vote" ng-click="vote({place:place.id})" flex="70">
                <h2>{{place.address}}</h2>
            </div>

            <div flex="15" class="text-center card-vote">
                <a class="button button-icon icon ion-checkmark-round no-padding size-medium margin-bottom" ng-show="place.hasVoted"></a>
            </div>
        </div>

        <div class="loader" ng-show="isLoading">
            <md-progress-circular md-mode="indeterminate"></md-progress-circular>
        </div>

    </md-content>
</ion-view>