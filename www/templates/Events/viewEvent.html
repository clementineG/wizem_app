<ion-view class="event-view">

    <ion-nav-bar class="bar-clear">
        <ion-nav-back-button class="back-button-map" style="margin-top:8px;margin-left:8px;"></ion-nav-back-button>

        <ion-nav-buttons side="left">
            <md-button class="md-icon-button md-primary" aria-label="Menu" menu-toggle="left">
                <a class="button button-icon icon ion-navicon-round margin-top-icon"></a>
            </md-button>
        </ion-nav-buttons>
    </ion-nav-bar>

    <md-content>
        <div flex class="shadow-bottom">
            <ui-gmap-google-map center='map.center' zoom='map.zoom' options='map.options' styles="map.styles">
                <ui-gmap-marker ng-repeat="m in markers" coords="m.coords" icon="m.icon" idkey="m.id"></ui-gmap-marker>
            </ui-gmap-google-map>
        </div>

        <div>
            <md-button class="md-fab md-fab-top-right md-mini md-primary confirm-fab" aria-label="Change state" ng-click="changeState()">
                <a class="button button-icon icon {{fabicon}} button-calm no-padding no-border size-medium"></a>
            </md-button>
        </div>

        <div layout-padding>
            <h2>{{event.typeEvent}}</h2>

            <div layout="row">
                <a class="button button-icon icon ion-calendar no-padding size-medium"></a>
                <span ng-if="event.date.final" flex class="margin-left" style="padding-top:13px;">{{event.date.final.date | date:'dd MMMM yyyy - HH'}} h {{event.date.final.date | date:'mm'}}</span>
                <span ng-if="!event.date.final" flex class="margin-left dates-link" style="padding-top:13px;">
                    <md-button class="md-primary" ui-sref="app.viewVoteDates({eventId:idEvent})" target="">La date n'est pas encore définie</md-button>
                </span>
            </div>

            <div layout="row">
                <div class="padding-left-min">
                    <a class="button button-icon icon ion-location no-padding size-medium"></a>
                </div>
                <span ng-if="event.place.final" flex class="margin-left padding-top-min">{{event.place.final.address}}</span>
                <span ng-if="!event.place.final" flex class="margin-left places-link padding-top-min">
                    <md-button class="md-primary" ui-sref="app.viewVotePlaces({eventId:idEvent})" target="">Le lieu n'est pas encore défini</md-button>
                </span>
            </div>

            <p>{{event.description}}</p>

            <div layout="row" class="text-center">
                <div ng-repeat="user in event.users" flex="33">
                    <guest-Block user="user"></guest-Block>
                </div>
            </div>

            <div layout="row">
                <md-input-container flex>
                    <md-button class="md-raised bouton-bleu blanc" ui-sref="app.allUsers({eventId:idEvent})">Voir tous les invités</md-button>
                </md-input-container>
            </div>

            <div layout="row">
                <md-input-container flex>
                    <md-button class="md-raised bouton-bleu blanc" ui-sref="app.gallery({eventId:idEvent})">Voir les photos</md-button>
                </md-input-container>
            </div>
        </div>
    </md-content>
</ion-view>